local a=require('data.min')local b=require('battery.min')local c=require('camera.min')local d=require('plain_text.min')CAMERA_SETTINGS_MSG=0x0d;TEXT_MSG=0x0a;a.parsers[CAMERA_SETTINGS_MSG]=c.parse_camera_settings;a.parsers[TEXT_MSG]=d.parse_plain_text;function clear_display()frame.display.text(" ",1,1)frame.display.show()frame.sleep(0.04)end;function print_text(e)local f=0;for g in e:gmatch("([^\n]*)\n?")do if g~=""then frame.display.text(g,1,f*60+1)f=f+1 end end;frame.display.show()end;function app_loop()local h=0;clear_display()while true do local i=a.process_raw_items()if i>0 then if a.app_data[CAMERA_SETTINGS_MSG]~=nil then rc,err=pcall(c.camera_capture_and_send,a.app_data[CAMERA_SETTINGS_MSG])if rc==false then print(err)end end;if a.app_data[TEXT_MSG]~=nil then clear_display()print_text(a.app_data[TEXT_MSG].string)end end;h=b.send_batt_if_elapsed(h,120)frame.sleep(0.1)end end;app_loop()