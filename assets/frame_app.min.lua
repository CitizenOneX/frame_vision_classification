local a=require('data.min')local b=require('battery.min')local c=require('camera.min')CAMERA_SETTINGS_MSG=0x0d;TEXT_MSG=0x0a;function parse_text(a)return a end;a.parsers[CAMERA_SETTINGS_MSG]=c.parse_camera_settings;a.parsers[TEXT_MSG]=parse_text;function clear_display()frame.display.text(" ",1,1)frame.display.show()frame.sleep(0.04)end;function print_text(d)local e=0;for f in d:gmatch("([^\n]*)\n?")do if f~=""then frame.display.text(f,1,e*60+1)e=e+1 end end;frame.display.show()end;function app_loop()local g=0;clear_display()while true do local h=a.process_raw_items()if h>0 then if a.app_data[CAMERA_SETTINGS_MSG]~=nil then rc,err=pcall(c.camera_capture_and_send,a.app_data[CAMERA_SETTINGS_MSG])if rc==false then print(err)end end;if a.app_data[TEXT_MSG]~=nil then clear_display()print_text(a.app_data[TEXT_MSG])end end;g=b.send_batt_if_elapsed(g,120)frame.sleep(0.1)end end;app_loop()